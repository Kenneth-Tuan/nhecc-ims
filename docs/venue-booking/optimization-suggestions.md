# 場地租借系統優化建議

本文件基於 `analysis.md` 中的現有系統分析，進一步探討場地租借需求的優化機會。現有系統依賴 Google Form 和 Spreadsheet，雖然簡單但存在效率瓶頸。以下從多個面向提出優化點，旨在提升使用者體驗、自動化程度和系統可擴展性。這些建議可融入 `refactoring-plan.md` 和 `api-design.md` 中的重構工作，遵循專案標準（如 Vue Composition API、Pinia、Tailwind CSS v4 和 Appwrite 整合）。

## 1. 流程優化

### 痛點：手動審核和通知依賴 Line@，易延遲或遺漏。

- **優化建議**：引入自動化審核邏輯，例如初步衝突檢查後自動批准簡單申請（無衝突、無特殊需求），僅將複雜案件轉給管理員。整合即時通知（如 email 或 Line Notify API），取代手動查詢。
- **實現方式**：在 API 中新增 webhook 觸發通知；前端使用 Pinia 狀態管理追蹤申請進度。
- **益處**：減少行政負擔，提高申請處理速度（目標：90% 申請在 1 小時內回應）。

### 痛點：資格確認依賴人工，個人需求需區牧同意。

- **優化建議**：實作角色-based 存取控制（RBAC），使用者登入後自動驗證角色（牧者、小組長等）。個人需求可新增「區牧批准」欄位，上傳證明文件。
- **實現方式**：擴展 Appwrite Users 集合，加入角色欄位；前端表單動態顯示相關欄位。
- **益處**：降低誤申請率，提升安全性。

## 2. UI/UX 優化

### 痛點：Google Form 欄位簡單但缺乏互動性，如即時可用性檢查。

- **優化建議**：在申請表單中整合即時場地可用性查詢，使用日曆组件（e.g., FullCalendar）顯示衝突。支援移動端響應式設計，使用 Tailwind CSS v4 的斷點（xl、md、sm）。
- **實現方式**：建立 components/VenueCalendar.vue，使用 Composition API 處理 computed 屬性避免 watch。
- **益處**：減少無效申請，提升使用者滿意度。

### 痛點：狀態顯示為靜態 Spreadsheet，難以過濾或搜尋。

- **優化建議**：轉為動態日曆視圖，支援過濾（日期、場地、狀態）和搜尋。新增視覺化元素，如顏色編碼（綠色可用、紅色占用）。
- **實現方式**：在 pages/venue-booking/status.vue 中使用 Pinia store 快取資料，定期輪詢 API 更新。
- **益處**：改善可讀性，支援行動裝置快速查詢。

## 3. 資料管理優化

### 痛點：資料分散在 Google 工具，缺乏整合和歷史記錄。

- **優化建議**：集中儲存於 Appwrite 資料庫，新增審核日誌和歷史版本追蹤。支援資料匯出/匯入（e.g., CSV 從 Spreadsheet 遷移）。
- **實現方式**：擴展 Bookings 模型加入 auditLog 陣列；API 新增匯出端點。
- **益處**：便於分析使用模式（如高峰期統計），支援未來擴展（如報告生成）。

### 痛點：時間/週期限制需手動檢查。

- **優化建議**：自動驗證規則（4小時限、2個月週期），在提交前提示錯誤。
- **實現方式**：在 venueApi.ts 中加入驗證邏輯，使用日期工具（如 date-fns）。
- **益處**：減少審核退件率，提高系統可靠性。

## 4. 安全性與效能優化

### 痛點：公開 Spreadsheet 可能洩露資訊。

- **優化建議**：實作資料隱私控制，仅顯示必要資訊給一般用戶；使用 Appwrite 的權限系統限制存取。
- **實現方式**：API 層級過濾敏感欄位（如手機號碼）。
- **益處**：符合資料保護規範。

### 痛點：大型資料集可能影響查詢速度。

- **優化建議**：實作分頁和索引（Appwrite 支援），快取頻繁查詢（e.g., 場地列表）。
- **實現方式**：在 store 中使用 memoization；監控 Core Web Vitals。
- **益處**：確保系統在高負載下效能穩定。

## 5. 可擴展性優化

### 痛點：僅支援特定場地和設備，未來可能新增。

- **優化建議**：設計模組化模型，允許動態新增場地/設備。整合第三方服務（如 Google Calendar 同步）。
- **實現方式**：使用 enums 或資料庫驅動的選項列表。
- **益處**：便於未來擴展，如好牧人莊園整合。

## 結論

這些優化點可顯著提升系統效率和使用者體驗，預計將申請處理時間縮短 50% 以上。建議在重構階段優先實現自動化功能，並進行使用者測試。後續可根據回饋迭代，若需更多細節，請參考其他文件。
